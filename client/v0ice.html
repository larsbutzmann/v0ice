<head>
  <title>v0ice</title>
</head>

<body>
  {{> navi}}
  <div class="container">
    {{> body}}
  </div>
</body>

<template name="navi">
  <div class="navi">
    <div class="input-append">
      <!--<input class="span2" id="appendedInputButtons" type="text">-->
      <button id="btn-list" class="btn span3" type="button">Hear</button>
      <button id="btn-record" class="btn span3" type="button">Record</button>
    </div>
  </div>
</template>

<template name="body">
  {{renderPage layoutName}}
</template>

<template name="home">
  {{> record}}
  <hr>
  {{> hear}}
</template>

<template name="hear">
  <div class="row-fluid">
    <div class="span4 offset5">
      <a href="#myModal" class="btn">
       <div class="hear-content">
       </div>
     </a>
   </div>
 </div>
</template>

<template name="record">
  <div class="row-fluid">
    <div class="span4 offset5">
      <div class="input-append">
        <!-- Div to trigger modal -->					 
        <a href="#myModal" class="btn" data-toggle="modal">
         <div id="record-btn" class="record-content" data-toggle="modal">
           <!-- <div id="record-btn" class="record-started"></div> -->
         </div>
       </a>
     </div>
     <!-- Modal -->
     <div id="myModal" class="modal custom-modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="myModalLabel">Audio Recording</h3>
      </div>
      <div class="modal-body center">
        <canvas id="analyser" width="768" height="200"></canvas><br>
        <canvas id="wavedisplay" width="768" height="200"></canvas><br>
        <br>
        <div id="stop-btn"></div>
        <div id="recording"></div>
      </div>
      <div class="modal-footer">
        <button class="btn pull-left span3" data-dismiss="modal" aria-hidden="true">Cancel</button>
        <button id="submit-file" class="btn btn-primary pull-right span3" data-dismiss="modal">Submit</button>
      </div>
    </div>
  </div>
</div>
</template>

<template name="fileIndex">
  <div class="files">
    <table class="table table-bordered">
     <tr>
      <th>USER</th>
      <th>URL</th>
      <th>AUDIO</th>
      <th>TIME</th>
    </tr>
    {{#each files}}
    <tr>
     <td>{{user_id}}</td>
     <td>{{url}}</td>
     <td>
      <audio controls src="{{path}}" type="audio/wave"></audio>
    </td>
    <td>{{timestamp}}</td>
  </tr>
  {{/each}}
</table>
</div>
</template>
